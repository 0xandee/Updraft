## Token and Pool Deployer Script

Now let's deploy our token and our pool contracts. And then we also need to do all of the Chainlink setup. So, if we head to the Chainlink documentation, then we can see in here inside CCIP guides, cross-chain token standard, we're going to be using this documentation. We've then clicked on register from an EOA: burn and mint and selected foundry. So, the first thing we need to do is deploy our tokens. In this instance, they're using this specific token, however, we've got our own custom one, which is fine. We're going to deploy our tokens. So, we need to create a function called run, which is going to be public and is going to return both of the contracts that we deploy, which is going to be the rebase token, token, and the rebase token pool, pool. And then we need to do a vm.startBroadcast and a vm.stopBroadcast. Then, we need to create token equals new new rebaseToken and let's have a little look inside rebaseToken. And I think it has no constructor arguments, I can't remember. Yeah, uh, no. We pass through. We hard-code the ERC20 and the ownable constructor argument. So, no, it doesn't take any constructor arguments. So, that's it for the rebase token, and we also need to import the rebase token. import rebaseToken from ../../src/rebaseToken.sol, and we're also going to need to import the rebaseTokenPool. So, the second step is going to be deploying the token pools. So, we need pool equals new rebaseTokenPool. Now, what are the constructor arguments for the rebaseTokenPool? So, from before you'll know, it's the IERC20 token, the allowlist which we're going to have as an empty array, this rmnProxy address and this router address which again we are going to get from CCIP local simulator fork. So, we need to import that again. So, we can import the CCIP local simulator fork from @chainlink-local/simulators/CCIPLocalSimulatorFork.sol. And then, down here we can create our local simulator fork contract instance. So, CCIP Local Simulator fork CCIP Local Simulator fork equals new CCIPLocalSimulatorFork(). Same as before equals new CCIP Local Simulator fork and this just allows us to get all those addresses and all of the different information that we need. So, we then can pass them through to the rebase token pool and then also remember we are going to need that IERC20 interface from @chainlink/contracts/src/v0.8/vendor/openzeppelin-solidity/v4.8.3/contracts/token/ERC20/IERC20.sol. Now, we can pass this through. So, IERC20 we're going to have to do an intermediate cast to address again, remember from before, the token, and then the second argument is going to be a new array, which is going to be our addresses with zero elements to be empty. Then, we are going to need the address of the rmnProxy address. So, CCIP local simulator fork address, so then what we need to do is, we need to get those network details from before, to get register from here again register and then we can say register . networkDetails network, details equals CCIP local simulator fork . getNetworkDetails(). networkDetails networkDetails . routerAddress. Then, we need to make sure that we are granting the mint and burn role for the pool. So, we can call the token . grantMintAndBurnRole for the pool. And, this accepts the address, so we need to cast it to an address because, right now it is of type rebaseTokenPool and then, we need to do the steps from here. So, we've done this claim the mint and burn roles. Now we need to call the registry owner module customs, register admin via owner. Then on the token admin registry call accept role, and then again on the token admin registry call set pool. So, again, we need to import those contracts, so we need to import the registry module owner. import registryModuleOwnerCustom from @chainlink/contracts/src/v0.8/ccIP/tokenAdminRegistry/RegistryModuleOwnerCustom.sol. There we go. From that is correct, no it's not. /CCIP/token admin registry and then we're going to get that from the network details again. network network details again. network details . tokenAdminRegistryAddress . setPool. And I can't remember what the way around this goes, and I think that's correct. I'm just going to double check set pool is the token, and then the pool both addresses. So, address token and then address pool. So, now, we have done all of the CCIP setup, and we have created a script to deploy the token and the pool and set the CCIP configuration, so we have registered the admin via the owner, so we've created a CCIP admin using our contracts owner. We've accepted the admin role, we've set the pool and we've gone to the mint and burn roles for both the pool. And, then we've created a vault. We've deployed it using a different script and we've created we've granted them the mint and burn role for that. So, we have created our scripts for deploying. So, let's run a little forge build just to check if we haven't done anything incorrectly. Uh, we need to store this in memory. It's struct, let's do it again. Oh, and I have spelled that correctly incorrectly again. rmn risk management network and this is the same warning from before, so, it's all good. 
                            ```bash
                            forge build
                            ```